Guía de Despliegue: API Gateway de PublicaciónEste proyecto implementa el backend (Node.js/Express) que actúa como un Gateway seguro para publicar contenido en múltiples redes sociales, utilizando n8n como base de datos de persistencia de tokens.1. Despliegue en RenderCrea un Nuevo Servicio Web en Render.Conecta tu repositorio y configura el servidor para usar Node.js.Configura las Variables de Entorno (CRÍTICAS):Nombre de VariableValor de EjemploDescripciónPORT3000Puerto de escucha (Render lo asignará automáticamente).N8N_SAVE_TOKEN_WEBHOOKhttps://tu-n8n.com/webhook/save-tokenURL REAL del Webhook de n8n para guardar tokens.N8N_GET_TOKENS_WEBHOOKhttps://tu-n8n.com/webhook/get-tokensURL REAL del Webhook de n8n para obtener tokens.JWT_SECRETTu_Secreto_Muy_Largo_y_SeguroSecreto para firmar y verificar los tokens de sesión del usuario.META_CLIENT_ID1234567890Client ID de tu aplicación de Meta (Facebook/Instagram).META_CLIENT_SECRETtu-client-secret-aquiClient Secret de tu aplicación de Meta.YOUTUBE_CLIENT_IDtu-google-client-idClient ID de tu aplicación de Google.YOUTUBE_CLIENT_SECRETtu-google-client-secretClient Secret de tu aplicación de Google.X_CLIENT_IDtu-twitter-client-idClient ID de tu aplicación de X (Twitter).X_CLIENT_SECRETtu-twitter-client-secretClient Secret de tu aplicación de X (Twitter)....Añadir claves para TikTok, Threads, etc.2. Configuración en n8nDebes crear dos flujos en n8n con los siguientes nodos de Webhook:Flujo de Guardado (/save-token):Nodo de inicio: Webhook (POST).Lógica: Recibe el JSON completo del token (userId, platform, access_token, expiresAt, refresh_token, etc.).Persistencia: Guarda o actualiza estos datos en tu base de datos persistente (Postgres, SQLite persistente) dentro de n8n.Respuesta: Devuelve un JSON simple { "status": "ok" }.Flujo de Obtención (/get-tokens):Nodo de inicio: Webhook (GET).Lógica: Recibe userId como parámetro de consulta.Consulta DB: Consulta tu base de datos para recuperar todos los tokens asociados a ese userId.Respuesta: Devuelve un objeto JSON con la clave tokens conteniendo todos los datos.{
  "status": "success",
  "tokens": {
    "instagram": { "access_token": "...", "expiresAt": "..." },
    "youtube": { "access_token": "...", "expiresAt": "..." }
  }
}
